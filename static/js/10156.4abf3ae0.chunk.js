"use strict";(self.webpackChunkmmsp_utility=self.webpackChunkmmsp_utility||[]).push([[10156],{10156:(t,e,r)=>{r.r(e),r.d(e,{assetMapFromAssetMapsJSON:()=>y,extractMesh:()=>h,meshFeatureSetFromJSON:()=>m});var o=r(39356),n=r(76460),s=r(87663),a=r(76797),i=r(47594),l=r(13312),u=r(57045),c=r(19463),p=r(77725),f=r(74159);const g=()=>n.A.getLogger("esri.rest.support.meshFeatureSet");function m(t,e,r){var n;const s=r.features;r.features=[],delete r.geometryType;const a=p.A.fromJSON(r);if(a.geometryType="mesh",!r.assetMaps)return a;const i=y(e,r.assetMaps),u=null!==(n=t.sourceSpatialReference)&&void 0!==n?n:l.A.WGS84,c=r.globalIdFieldName,{outFields:f}=t,g=null!=f&&f.length>0?(m=f.includes("*")?null:new Set(f),t=>{let{attributes:e}=t;if(!e)return{};if(!m)return e;for(const r in e)m.has(r)||delete e[r];return e}):()=>({});var m;for(const l of s){const t=h(l,c,u,e,i);a.features.push(new o.A({geometry:t,attributes:g(l)}))}return a}function h(t,e,r,o,n){const s=t.attributes[e],l=n.get(s);if(null==l||!t.geometry)return null;const c=(0,f.V)(t.attributes,r,o.transformFieldRoles),p=a.A.fromJSON(t.geometry);p.spatialReference=r;const g=(0,f.f)(t.attributes,o.transformFieldRoles),m=r.isGeographic?"local":"georeferenced",h=function(t){const e=Array.from(t.files.values()),r=new Array;for(const o of e){if(2!==o.status)return null;const t=new Array;for(const e of o.parts){if(!e)return null;t.push(new u.Bq(e.url,e.hash))}r.push(new u.Qp(o.name,o.mimeType,t))}return{type:"service",assets:r}}(l);return h?i.default.createWithExternalSource(c,h,{extent:p,transform:g,vertexSpace:m,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:p,transform:g,vertexSpace:m})}function y(t,e){const r=new Map;for(const o of e){const e=o.parentGlobalId;if(null==e)continue;const n=o.assetName,a=o.assetType,i=o.assetHash,l=o.assetURL,u=o.conversionStatus,p=o.seqNo,f=(0,c.Fm)(a,t.supportedFormats);if(!f){g().error("mesh-feature-set:unknown-format","Service returned an asset of type ".concat(a,", but it does not list it as a supported type"));continue}const m=(0,s.tE)(r,e,()=>({files:new Map}));(0,s.tE)(m.files,n,()=>({name:n,type:a,mimeType:f,status:d(u),parts:[]})).parts[p]={hash:i,url:l}}return r}function d(t){switch(t){case"COMPLETED":case"SUBMITTED":return 2;case"INPROGRESS":return 1;default:return 0}}},32186:(t,e,r)=>{r.d(e,{A:()=>m});var o=r(6326),n=r(69098),s=r(42553),a=r(46053),i=(r(81806),r(76460),r(47249),r(87990)),l=r(34761),u=r(13191),c=r(60008),p=r(4336),f=r(9392),g=r(52896);let m=class extends((0,n.OU)(s.o)){constructor(t){super(t),this.translation=(0,f.vt)(),this.rotationAxis=(0,f.ci)(g.up),this.rotationAngle=0,this.scale=(0,f.fA)(1,1,1)}get rotation(){return(0,g.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,f.o8)((0,g.yo)(t)),this.rotationAngle=(0,g.g7)(t)}get localMatrix(){const t=(0,u.vt)();return(0,c.x8)(h,(0,g.yo)(this.rotation),(0,g.$I)(this.rotation)),(0,l.o1)(t,h,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.B8)((0,u.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.t2)(this.localMatrix,t.localMatrix)}};(0,o.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"translation",void 0),(0,o.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"rotationAxis",void 0),(0,o.Cg)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"rotationAngle",void 0),(0,o.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],m.prototype,"scale",void 0),(0,o.Cg)([(0,a.MZ)()],m.prototype,"rotation",null),(0,o.Cg)([(0,a.MZ)()],m.prototype,"localMatrix",null),(0,o.Cg)([(0,a.MZ)()],m.prototype,"localMatrixInverse",null),m=(0,o.Cg)([(0,i.$)("esri.geometry.support.MeshTransform")],m);const h=(0,p.vt)()},74159:(t,e,r)=>{r.d(e,{V:()=>s,f:()=>a});var o=r(19247),n=r(32186);function s(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new o.A({x:t[r.originX],y:t[r.originY],z:t[r.originZ],spatialReference:e})}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return new n.A({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}}}]);
//# sourceMappingURL=10156.4abf3ae0.chunk.js.map